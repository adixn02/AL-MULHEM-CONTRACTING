# Al-Mulhem Contracting - Apache cache & security
# Enable: AllowOverride All for this directory

<IfModule mod_headers.c>
  # Security
  Header set X-Frame-Options "SAMEORIGIN"
  Header set X-Content-Type-Options "nosniff"
  Header set Referrer-Policy "strict-origin-when-cross-origin"

  # HTML: revalidate every time
  <FilesMatch "\.(html|htm)$">
    Header set Cache-Control "public, max-age=0, must-revalidate"
  </FilesMatch>

  # CSS & JS: 1 year (use query string ?v= for cache bust when you update)
  <FilesMatch "\.(css|js)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>

  # Images: 1 year
  <FilesMatch "\.(jpg|jpeg|png|gif|webp|svg|avif|ico)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>
</IfModule>

# Custom 404 page
ErrorDocument 404 /404.html

# Optional: compress text assets
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/css application/javascript application/json image/svg+xml
</IfModule>
